function r(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,n=Array(t);e<t;e++)n[e]=r[e];return n}var t,e=0,n=document.getElementsByClassName("message-lose")[0],o=document.getElementsByClassName("start")[0],a=document.getElementsByClassName("message-start")[0],i=document.getElementsByClassName("message-win")[0],s=document.getElementsByClassName("game-score")[0];function f(){if(function(){for(var r=0;r<4;r++)for(var e=0;e<4;e++)if(0===t[r][e])return!0;return!1}())for(var r=!1;!r;){var e=Math.floor(4*Math.random()),n=Math.floor(4*Math.random());if(0===t[e][n]){var o=Math.floor(10*Math.random()),a=document.getElementById(e.toString()+"-"+n.toString());r=!0,0===o?(t[e][n]=4,a.innerText="4",a.classList.add("field-cell--4")):(t[e][n]=2,a.innerText="2",a.classList.add("field-cell--2"))}}}function c(r,t){r.innerText="",r.classList.value="",r.classList.add("field-cell"),t>0&&(r.innerText=t,t<=2048&&r.classList.add("field-cell--"+t))}function l(r){return r.filter(function(r){return 0!==r})}function u(t){var n=function(t){if(Array.isArray(t))return r(t)}(t)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(t)||function(t,e){if(t){if("string"==typeof t)return r(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,void 0)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();n=l(n);for(var o=0;o<n.length-1;o++)n[o]===n[o+1]&&(n[o]*=2,n[o+1]=0,e+=n[o],s.innerText=e);for(n=l(n);n.length<4;)n.push(0);return n}function d(r){for(var e=0;e<4;e++)for(var n=0;n<4;n++)if(r[e][n]!==t[e][n])return!0;return!1}o.addEventListener("click",function(r){!function(){e=0,s.innerText=e,a.classList.add("hidden"),o.classList.remove("start"),o.classList.add("restart"),n.classList.add("hidden"),o.innerText="Restart",t=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];for(var r=0;r<4;r++)for(var i=0;i<4;i++){var l=document.getElementsByClassName("field-row")[r].children[i],u=t[r][i];l.id=r.toString()+"-"+i.toString(),c(l,u)}f(),f()}()}),document.addEventListener("keyup",function(r){var e=t.map(function(r){return r.slice()});switch(r.code){case"ArrowLeft":(function(){for(var r=0;r<4;r++){var e=t[r];e=u(e),t[r]=e;for(var n=0;n<4;n++)c(document.getElementById(r.toString()+"-"+n.toString()),t[r][n])}})(),d(e)&&f();break;case"ArrowRight":(function(){for(var r=0;r<4;r++){var e=t[r];e.reverse(),(e=u(e)).reverse(),t[r]=e;for(var n=0;n<4;n++)c(document.getElementById(r.toString()+"-"+n.toString()),t[r][n])}})(),d(e)&&f();break;case"ArrowUp":(function(){for(var r=0;r<4;r++){for(var e=[],n=0;n<4;n++)e.push(t[n][r]);e=u(e);for(var o=0;o<4;o++)t[o][r]=e[o],c(document.getElementById(o.toString()+"-"+r.toString()),t[o][r])}})(),d(e)&&f();break;case"ArrowDown":(function(){for(var r=0;r<4;r++){for(var e=[],n=0;n<4;n++)e.push(t[n][r]);e.reverse(),(e=u(e)).reverse();for(var o=0;o<4;o++)t[o][r]=e[o],c(document.getElementById(o.toString()+"-"+r.toString()),t[o][r])}})(),d(e)&&f()}(function(r){for(var t=0;t<4;t++)for(var e=0;e<4;e++)if(0===r[t][e])return!1;return!0})(t)&&function(r){for(var t=0;t<4;t++)for(var e=0;e<3;e++)if(r[t][e]===r[t][e+1])return!1;for(var n=0;n<3;n++)for(var o=0;o<4;o++)if(r[n][o]===r[n+1][o])return!1;return!0}(t)&&n.classList.remove("hidden"),function(r){for(var t=0;t<4;t++)for(var e=0;e<4;e++)if(2048===r[t][e])return!0;return!1}(t)&&i.classList.remove("hidden")});
//# sourceMappingURL=index.b8da1f0f.js.map
